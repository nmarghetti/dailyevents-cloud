(function(g){"function"===typeof define&&define.amd?"undefined"!==typeof jQuery?define(["jquery"],g):define([],g):"undefined"!==typeof jQuery?g(jQuery):g()})(function(g,l){function s(c){c=c.tagName;return"undefined"!==typeof c?t[c.toLowerCase()]:c}function p(c,a,d,b){var e=c.shift();if(e){var f=a[d]=a[d]||[];if("]"==e)if(j(f))""!=b&&f.push(b);else if("object"==typeof f){a=c=f;d=[];for(prop in a)a.hasOwnProperty(prop)&&d.push(prop);c[d.length]=b}else a[d]=[a[d],b];else{~e.indexOf("]")&&(e=e.substr(0, e.length-1));if(!q.test(e)&&j(f))if(0==a[d].length)f=a[d]={};else{var f={},m;for(m in a[d])f[m]=a[d][m];a[d]=f}p(c,f,e,b)}}else j(a[d])?a[d].push(b):a[d]="object"==typeof a[d]?b:"undefined"==typeof a[d]?b:[a[d],b]}function r(c){c=String(c).split(/&|;/);for(var a=function(f,b){try{b=decodeURIComponent(b.replace(/\+/g," "))}catch(d){}var c=b.indexOf("="),a;a:{for(var e=b.length,g,k=0;k<e;++k)if(g=b[k],"]"==g&&(a=!1),"["==g&&(a=!0),"="==g&&!a){a=k;break a}a=void 0}e=b.substr(0,a||c);a=b.substr(a||c, b.length);a=a.substr(a.indexOf("=")+1,a.length);""==e&&(e=b,a="");c=e;e=a;if(~c.indexOf("]")){var h=c.split("[");p(h,f,"base",e)}else{if(!q.test(c)&&j(f.base)){a={};for(h in f.base)a[h]=f.base[h];f.base=a}h=f.base;a=h[c];l===a?h[c]=e:j(a)?a.push(e):h[c]=[a,e]}return f},d=0,b=c.length>>0,e={base:{}};d<b;)d in c&&(e=a.call(l,e,c[d],d,c)),++d;return e.base}function j(c){return"[object Array]"===Object.prototype.toString.call(c)}function n(c,a){1===arguments.length&&!0===c&&(a=!0,c=l);c=c||window.location.toString(); for(var d=a||!1,b=decodeURI(c),d=u[d?"strict":"loose"].exec(b),b={attr:{},param:{},seg:{}},e=14;e--;)b.attr[v[e]]=d[e]||"";b.param.query=r(b.attr.query);b.param.fragment=r(b.attr.fragment);b.seg.path=b.attr.path.replace(/^\/+|\/+$/g,"").split("/");b.seg.fragment=b.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");b.attr.base=b.attr.host?(b.attr.protocol?b.attr.protocol+"://"+b.attr.host:b.attr.host)+(b.attr.port?":"+b.attr.port:""):"";return{data:b,attr:function(a){a=w[a]||a;return"undefined"!==typeof a? this.data.attr[a]:this.data.attr},param:function(a){return"undefined"!==typeof a?this.data.param.query[a]:this.data.param.query},fparam:function(a){return"undefined"!==typeof a?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){if("undefined"===typeof a)return this.data.seg.path;a=0>a?this.data.seg.path.length+a:a-1;return this.data.seg.path[a]},fsegment:function(a){if("undefined"===typeof a)return this.data.seg.fragment;a=0>a?this.data.seg.fragment.length+a:a-1;return this.data.seg.fragment[a]}}} var t={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},v="source protocol authority userInfo user password host port relative path directory file query fragment".split(" "),w={anchor:"fragment"},u={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}, q=/^[0-9]+$/;"undefined"!==typeof g?(g.fn.url=function(c){var a="";this.length&&(a=g(this).attr(s(this[0]))||"");return n(a,c)},g.url=n):window.purl=n});